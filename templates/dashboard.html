{% extends "base.html" %}

{% block title %}Просмотр данных{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="text-center mb-4">Dashboard</h1>
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card text-white bg-primary">
                <div class="card-body">
                    <h5 class="card-title">Всего Поставщиков</h5>
                    <p class="card-text">Количество зарегистрированных поставщиков: {{ total_suppliers }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card text-white bg-success">
                <div class="card-body">
                    <h5 class="card-title">Успешные Парсинги</h5>
                    <p class="card-text">Количество успешных парсингов: {{ successful_scrapes }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card text-white bg-danger">
                <div class="card-body">
                    <h5 class="card-title">Ошибки Парсинга</h5>
                    <p class="card-text">Количество ошибок парсинга: {{ scrape_errors }}</p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    Недавние Парсинги
                </div>
                <ul class="list-group list-group-flush">
                    {% for scrape in recent_scrapes %}
                        <li class="list-group-item">
                            {{ scrape.supplier_name }} - {{ scrape.status }}
                            <span class="badge bg-secondary float-end">{{ scrape.date }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    Популярные Поставщики
                </div>
                <ul class="list-group list-group-flush">
                    {% for supplier in popular_suppliers %}
                        <li class="list-group-item">
                            {{ supplier.name }} - {{ supplier.usage_count }} парсингов
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS and necessary dependencies -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}
